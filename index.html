<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laborat√≥rio Virtual de Qu√≠mica ‚öóÔ∏è</title>
    <style>
        /* Estilos Gerais */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f4f8;
            color: #2c3e50;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .container {
            width: 95%;
            max-width: 1400px; 
            margin: 30px auto;
            display: flex;
            gap: 20px;
        }
        h2 {
            color: #2980b9;
            border-bottom: 2px solid #bdc3c7;
            padding-bottom: 5px;
            margin-top: 0;
        }

        /* --- ANIMA√á√ÉO DE FUS√ÉO --- */
        @keyframes fusao-quimica {
            0% { opacity: 1; transform: translate(-50%, -50%) rotate(0deg) scale(1); }
            50% { opacity: 1; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(180deg) scale(1.1); }
            100% { opacity: 0; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(360deg) scale(0); }
        }
        
        /* --- ANIMA√á√ÉO DO PRODUTO: Aparece no centro --- */
        @keyframes produto-aparece {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* Layout */
        .left-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .lab-area { 
            flex: 1; 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); 
        }

        /* Jarra e Componentes */
        #jarra {
            width: 80%; height: 250px; margin: 40px auto; padding: 15px; background-color: #e6f7ff;
            position: relative; overflow: hidden; border: 3px solid #3498db; border-top: none;
            border-radius: 0 0 40px 40px / 0 0 20px 20px; box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            text-align: center; display: flex; align-items: center; justify-content: center;
            color: #555; font-size: 1.1em; font-style: italic;
        }
        #jarra::after {
            content: ''; position: absolute; top: -20px; left: -3px; right: -3px; height: 20px;
            background-color: #e6f7ff; border: 3px solid #3498db; border-radius: 10px 10px 0 0 / 5px 5px 0 0;
        }
        .element-in-jarra {
            position: absolute; display: flex; align-items: center; justify-content: center; color: white;
            width: 45px; height: 45px; border-radius: 50%; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            font-size: 1.1em; cursor: default; z-index: 1; box-sizing: border-box; 
            transform: translate(-50%, -50%); 
        }
        .reagente-animado { animation: fusao-quimica 1s forwards ease-in-out; }
        
        .produto-final {
            position: absolute; top: 50%; left: 50%; padding: 15px; background-color: #f7dc6f;
            border: 3px solid #e67e22; border-radius: 10px; font-weight: bold; font-size: 1.2em;
            opacity: 0; transform: translate(-50%, -50%); animation: produto-aparece 0.5s 1.2s forwards;
            z-index: 2; cursor: grab; box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* --- CORES DOS ELEMENTOS NA JARRA --- */
        .H { background-color: #e74c3c; } .O { background-color: #3498db; } .Na { background-color: #f1c40f; color: #333; } .Cl { background-color: #27ae60; } .Mg { background-color: #85c1e9; color: #333; } .Al { background-color: #7f8c8d; } .S { background-color: #f39c12; color: #333; } .C { background-color: #1abc9c; } .He, .Ne, .Ar { background-color: #9b59b6; } .Li { background-color: #ff6f61; color: white; } .Be { background-color: #add8e6; color: #333; } .N { background-color: #9acd32; color: white; } .F { background-color: #ffd700; color: #333; } .K { background-color: #8a2be2; color: white; } .Br { background-color: #a52a2a; color: white; } .Ca { background-color: #ffe066; color: #333; } .Fe { background-color: #b74f6f; color: white; } .Cu { background-color: #c98e3b; color: white; } .P { background-color: #795548; color: white; } .I { background-color: #4b0082; color: white; }

        /* Estilos de layout e bot√µes */
        #resultado { margin-top: 20px; padding: 15px; background-color: #ecf0f1; border-radius: 5px; min-height: 50px; }
        .produto-visual { margin-top: 10px; padding: 15px; border: 2px solid #2980b9; border-radius: 8px; background-color: #ffffff; font-size: 1.2em; font-weight: bold; text-align: center; }
        #elemento-info { background-color: #f9f9f9; border: 1px dashed #2980b9; padding: 10px; margin-top: 20px; border-radius: 5px; }
        .botoes { margin-top: 15px; display: flex; gap: 10px; }
        .botoes button { background-color: #2980b9; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; transition: background-color 0.3s ease; }
        .botoes button:hover { background-color: #3498db; }
        .aparencia-produto { font-style: italic; font-weight: bold; color: #e67e22; margin-top: 5px; display: block; }

        /* --- Estilos da Tabela Peri√≥dica (Corrigido) --- */
        .periodic-table-container { 
            /* N√£o usamos mais flex: 1, pois √© a coluna esquerda inteira agora */
            max-width: 500px; 
        }
        .periodic-table { 
            display: grid; 
            grid-template-columns: repeat(18, 1fr); 
            gap: 3px; 
            background-color: #bdc3c7; 
            padding: 5px; 
            border-radius: 8px; 
        }
        .element { 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            height: 50px; cursor: pointer; transition: background-color 0.1s, transform 0.1s; 
            user-select: none; font-size: 0.7em; font-weight: bold; border-radius: 3px; 
            border: 1px solid rgba(0, 0, 0, 0.2); 
            color: #2c3e50; 
            box-sizing: border-box; 
        }
        .element:hover { opacity: 0.9; transform: scale(1.05); box-shadow: 0 0 5px rgba(0, 0, 0, 0.3); }
        .element:empty { background-color: transparent !important; cursor: default; border: none; }
        .symbol { font-size: 1.4em; }

        /* Cores dos grupos da Tabela Peri√≥dica */
        .non-metal { background-color: #a8dadc; } 
        .alkali-metal { background-color: #ffb703; color: white; } 
        .alkaline-earth { background-color: #ffc300; } 
        .metal { background-color: #2a9d8f; color: white; } 
        .transition-metal { background-color: #3a86ff; color: white; } 
        .halogen { background-color: #e63946; color: white; } 
        .noble-gas { background-color: #457b9d; color: white; } 
        .other-non-metal { background-color: #4cc9f0; }

        /* --- Estilos da √Årea da Planta (Movida) --- */
        .plant-area {
            background: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #plant-container {
            width: 250px;
            height: 300px;
            margin: 30px auto;
            border: 2px dashed #999;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end; 
            position: relative;
            background-color: #f9f9f9;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }
        
        #plant-container.drag-over {
            background-color: #d8f5d8;
            border-color: #28a745;
        }

        /* Estilo da Terra/Vaso */
        #plant-container::before {
            content: '';
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 80px;
            background-color: #8b4513; 
            border-radius: 0 0 8px 8px;
            z-index: 0;
        }

        /* Estilo da Planta (CSS Art) */
        .plant {
            position: absolute;
            bottom: 70px; 
            width: 100%;
            height: 150px; 
            transition: all 0.5s ease-in-out;
            z-index: 1;
            transform-origin: bottom center; 
            transform: scaleY(0.5); 
        }

        .plant .stem {
            width: 10px;
            height: 80%;
            background-color: #228b22; 
            margin: 0 auto;
            border-radius: 5px;
            position: relative;
        }

        .plant .leaf {
            width: 40px;
            height: 20px;
            background-color: #3cb371; 
            border-radius: 0 50% 50% 0; 
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translateX(-50%) rotate(-30deg);
            transform-origin: left center;
            transition: all 0.5s ease;
        }
        .plant .leaf:nth-child(2) {
            top: 50%;
            transform: translateX(-50%) rotate(30deg);
            border-radius: 50% 0 0 50%;
        }
        .plant .leaf:nth-child(3) {
            top: 10%;
            width: 30px;
            height: 15px;
            transform: translateX(-50%) rotate(-45deg);
        }
        .plant .leaf:nth-child(4) {
            top: 70%;
            width: 35px;
            height: 18px;
            transform: translateX(-50%) rotate(45deg);
            border-radius: 50% 0 0 50%;
        }

        /* --- Estados da Planta --- */
        .plant-state-normal {
            transform: scaleY(1);
            filter: grayscale(0%);
        }

        .plant-state-crescida {
            transform: scaleY(1.5); 
            filter: grayscale(0%);
            animation: grow-glow 1s ease-out forwards;
        }

        @keyframes grow-glow {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
            100% { filter: brightness(1); }
        }

        .plant-state-murcha {
            transform: scaleY(0.3) rotateZ(-5deg); 
            filter: grayscale(80%) brightness(0.7); 
        }

        .plant-state-envenenada {
            transform: scaleY(0.7) rotateZ(-10deg);
            filter: saturate(0%) brightness(0.5) sepia(100%) hue-rotate(30deg); 
            animation: poison-pulse 1s infinite alternate;
        }

        @keyframes poison-pulse {
            0% { transform: scaleY(0.7) rotateZ(-10deg); filter: saturate(0%) brightness(0.5) sepia(100%) hue-rotate(30deg); }
            100% { transform: scaleY(0.65) rotateZ(-12deg); filter: saturate(0%) brightness(0.4) sepia(100%) hue-rotate(40deg); }
        }

        .plant-state-exotica {
            transform: scaleY(1.2) rotateZ(5deg);
            filter: hue-rotate(180deg) saturate(1.5); 
            animation: exotic-bloom 1.5s infinite alternate;
        }

        @keyframes exotic-bloom {
            0% { transform: scaleY(1.2) rotateZ(5deg); }
            100% { transform: scaleY(1.25) rotateZ(-5deg); }
        }

    </style>
</head>
<body>

    <header>
        <h1>Laborat√≥rio Virtual de Qu√≠mica ‚öóÔ∏è</h1>
        <p>Clique em um elemento para adicionar √† Jarra e liberar suas informa√ß√µes!</p>
    </header>

    <div class="container">
        
        <div class="left-column">
            
            <div class="periodic-table-container">
                <h2>Tabela Peri√≥dica</h2>
                <div class="periodic-table" id="periodicTable">
                    
                    <div class="element non-metal" onclick="adicionarElemento('H', 'Hidrog√™nio', 'G√°s, altamente reativo. O elemento mais leve do universo.', 1)">1<span class="symbol">H</span></div>
                    <div class="element" style="grid-column: span 16;"></div>
                    <div class="element noble-gas" onclick="adicionarElemento('He', 'H√©lio', 'G√°s inerte e nobre. Usado em bal√µes por ser leve e seguro.', 2)">2<span class="symbol">He</span></div>
                    
                    <div class="element alkali-metal" onclick="adicionarElemento('Li', 'L√≠tio', 'Metal alcalino, o metal mais leve. Usado em baterias recarreg√°veis.', 3)">3<span class="symbol">Li</span></div>
                    <div class="element alkaline-earth" onclick="adicionarElemento('Be', 'Ber√≠lio', 'Metal alcalino-terroso. Leve e resistente, usado em ligas met√°licas.', 4)">4<span class="symbol">Be</span></div>
                    <div class="element" style="grid-column: span 9;"></div>
                    <div class="element other-non-metal" onclick="adicionarElemento('N', 'Nitrog√™nio', 'G√°s incolor e inodoro, principal componente do ar.', 7)">7<span class="symbol">N</span></div>
                    <div class="element non-metal" onclick="adicionarElemento('O', 'Oxig√™nio', 'G√°s essencial para a respira√ß√£o e combust√£o. √â o O‚ÇÇ.', 8)">8<span class="symbol">O</span></div>
                    <div class="element halogen" onclick="adicionarElemento('F', 'Fl√∫or', 'G√°s altamente reativo, o elemento mais eletronegativo.', 9)">9<span class="symbol">F</span></div>
                    <div class="element noble-gas" onclick="adicionarElemento('Ne', 'Ne√¥nio', 'G√°s nobre inerte. Produz luz laranja-avermelhada em letreiros.', 10)">10<span class="symbol">Ne</span></div>

                    <div class="element alkali-metal" onclick="adicionarElemento('Na', 'S√≥dio', 'Metal alcalino muito reativo. Explode em contato com a √°gua.', 11)">11<span class="symbol">Na</span></div>
                    <div class="element alkaline-earth" onclick="adicionarElemento('Mg', 'Magn√©sio', 'Metal alcalino-terroso. Queima com uma luz branca e brilhante.', 12)">12<span class="symbol">Mg</span></div>
                    <div class="element" style="grid-column: span 6;"></div>
                    <div class="element other-non-metal" onclick="adicionarElemento('P', 'F√≥sforo', 'N√£o-metal reativo. O f√≥sforo branco √© muito t√≥xico.', 15)">15<span class="symbol">P</span></div>
                    <div class="element other-non-metal" onclick="adicionarElemento('S', 'Enxofre', 'S√≥lido amarelo. Usado em fertilizantes, p√≥lvora e vulcaniza√ß√£o.', 16)">16<span class="symbol">S</span></div>
                    <div class="element halogen" onclick="adicionarElemento('Cl', 'Cloro', 'Halog√™nio t√≥xico. Usado como desinfetante e na produ√ß√£o de PVC.', 17)">17<span class="symbol">Cl</span></div>
                    <div class="element noble-gas" onclick="adicionarElemento('Ar', 'Arg√¥nio', 'G√°s nobre inerte. Usado em l√¢mpadas e soldagem.', 18)">18<span class="symbol">Ar</span></div>

                    <div class="element alkali-metal" onclick="adicionarElemento('K', 'Pot√°ssio', 'Metal alcalino macio e altamente reativo. Essencial para a vida.', 19)">19<span class="symbol">K</span></div>
                    <div class="element alkaline-earth" onclick="adicionarElemento('Ca', 'C√°lcio', 'Metal alcalino-terroso. Essencial para ossos e dentes.', 20)">20<span class="symbol">Ca</span></div>
                    <div class="element transition-metal" style="grid-column: span 6;"></div>
                    <div class="element transition-metal" onclick="adicionarElemento('Fe', 'Ferro', 'Metal de transi√ß√£o, base da ind√∫stria. Reage com O para formar ferrugem.', 26)">26<span class="symbol">Fe</span></div>
                    <div class="element transition-metal" style="grid-column: span 2;"></div>
                    <div class="element transition-metal" onclick="adicionarElemento('Cu', 'Cobre', 'Metal de transi√ß√£o, bom condutor de eletricidade e calor.', 29)">29<span class="symbol">Cu</span></div>
                    <div class="element" style="grid-column: span 5;"></div>
                    <div class="element halogen" onclick="adicionarElemento('Br', 'Bromo', 'L√≠quido vol√°til avermelhado. T√≥xico e corrosivo.', 35)">35<span class="symbol">Br</span></div>
                    <div class="element" style="grid-column: span 1;"></div>

                    <div class="element" style="grid-column: span 17;"></div>
                    <div class="element halogen" onclick="adicionarElemento('I', 'Iodo', 'S√≥lido roxo-escuro que sublima (passa para g√°s) facilmente.', 53)">53<span class="symbol">I</span></div>
                    
                    <div class="element" style="grid-column: span 18; height: 10px;"></div>
                    <div class="element" style="grid-column: span 18; background-color: #e6e6e6; border: none; height: 25px;">... clique nos elementos acima para interagir ...</div>
                </div>
            </div>

            <div class="plant-area">
                <h2>Jardim Experimental üå±</h2>
                <p>Arraste o composto (ap√≥s a rea√ß√£o) da jarra para a planta e veja a rea√ß√£o!</p>
                <div id="plant-container" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                    <div class="plant" id="myPlant">
                        <div class="stem"></div>
                        <div class="leaf"></div>
                        <div class="leaf"></div>
                        <div class="leaf"></div>
                        <div class="leaf"></div>
                    </div>
                    <p id="plant-feedback" style="position: absolute; bottom: 10px; color: #333; font-weight: bold;">Planta em estado Normal.</p>
                </div>
                <button onclick="resetPlant()" style="margin-top: 15px;">Resetar Planta</button>
            </div>
        </div>

        <div class="lab-area">
            <h2>Jarra de Experimentos (Reagentes)</h2>
            
            <div id="jarra">
                Clique nos elementos da Tabela Peri√≥dica para adicion√°-los.
            </div>
            
            <div class="botoes">
                <button onclick="simularReacao()">Ver Rea√ß√£o</button>
                <button onclick="resetLab()">Limpar Jarra</button>
            </div>

            <div id="elemento-info">
                <h3>Informa√ß√µes do Elemento Selecionado</h3>
                <p>Nenhum elemento liberado. Clique em um da tabela para ver detalhes e adicion√°-lo √† jarra.</p>
            </div>

            <div id="resultado">
                Aguardando a sua primeira mistura...
            </div>

            <section id="elementos-criados">
                <h2>Compostos Criados</h2>
                <ul id="lista-elementos-criados">
                    <li>Nenhum composto criado ainda.</li>
                </ul>
            </section>
        </div>

    </div>

    <script>
        // Vari√°veis de Estado
        let elementosNaJarra = []; 
        let compostosCriados = [];
        let ultimoCompostoNaJarra = null; 

        const imagensCompostos = {
            'H‚ÇÇO': 'üíß Mol√©cula de √Ågua (L√≠quido)', 'NaCl': 'üßÇ Cristais de Sal (S√≥lido)', 'MgO': 'üçö P√≥ de Magn√©sio (S√≥lido)', 'Al‚ÇÇO‚ÇÉ': 'üíé Alumina (S√≥lido)', 'H‚ÇÇS': 'üí® G√°s Fedorento (G√°s)', 'CO‚ÇÇ': '‚òÅÔ∏è Gelo Seco (G√°s/S√≥lido)', 'Org√¢nico': 'üß¨ Mol√©cula Org√¢nica', 'Li‚ÇÇO': '‚ö™ √ìxido de L√≠tio (P√≥ branco)', 'BeO': 'üóª √ìxido de Ber√≠lio (S√≥lido cristalino)', 'NH‚ÇÉ': 'üå¨Ô∏è G√°s Am√¥nia (G√°s pungente)', 'KCl': 'üçö Cloreto de Pot√°ssio (S√≥lido branco)', 'NaBr': 'üßÇ Brometo de S√≥dio (Cristais brancos)', 'HF': 'üß™ Fluoreto de Hidrog√™nio (G√°s/L√≠quido corrosivo)', 'Cianeto': 'üíÄ Cianeto (Mol√©cula t√≥xica)', 'CaO': '‚ö™ √ìxido de C√°lcio (Cal viva, p√≥ branco)', 'Fe_Oxido': 'üß± √ìxido de Ferro (Ferrugem, s√≥lido avermelhado)', 'CuS': '‚ö´ Sulfeto de Cobre (P√≥ preto/marrom)', 'HI': 'üí® Iodeto de Hidrog√™nio (G√°s, √°cido forte)', 'Na‚ÇÉP': '‚ú® Fosfeto de S√≥dio (S√≥lido, muito reativo)', 'CP': 'üï∏Ô∏è Carbureto de F√≥sforo (Composto complexo)', 'Mistura': '‚ö†Ô∏è Mistura Sem Rea√ß√£o Programada (L√≠quido)'
        };

        // ------------------------------------------------
        // 1. Fun√ß√£o de Adicionar e Posicionar Elemento
        // ------------------------------------------------
        function adicionarElemento(simbolo, nome, info, nAtomico) {
            const jarra = document.getElementById('jarra');
            const infoDiv = document.getElementById('elemento-info');
            
            infoDiv.innerHTML = `<h3>Elemento Liberado: ${nome} (${simbolo})</h3><p><strong>N¬∫ At√¥mico:</strong> ${nAtomico}</p><p><strong>Descri√ß√£o:</strong> ${info}</p>`;

            if (elementosNaJarra.length === 0 && jarra.textContent.includes('Clique nos elementos')) {
                jarra.innerHTML = ''; 
                jarra.style.display = 'block'; 
            }

            // Remove o produto final se existir, para adicionar novos reagentes
            const produtoExistente = document.querySelector('.produto-final');
            if (produtoExistente) {
                produtoExistente.remove();
                ultimoCompostoNaJarra = null;
            }

            const elementoVisual = document.createElement('span');
            elementoVisual.textContent = simbolo;
            // AQUI ESTAVA O SEU PROBLEMA: A classe do elemento, que d√° a cor e o estilo,
            // √© adicionada com sucesso pelo segundo argumento.
            elementoVisual.classList.add('element-in-jarra', simbolo);
            
            // Posi√ß√µes estrat√©gicas
            const posicoesIniciais = [
                { top: '25%', left: '25%' }, 
                { top: '25%', left: '75%' }, 
                { top: '75%', left: '25%' }, 
                { top: '75%', left: '75%' }  
            ];

            const index = elementosNaJarra.length % posicoesIniciais.length; 
            const { top, left } = posicoesIniciais[index];

            elementoVisual.style.top = top;
            elementoVisual.style.left = left;
            
            jarra.appendChild(elementoVisual);
            
            elementosNaJarra.push({ simbolo: simbolo, dom: elementoVisual });
        }

        // ------------------------------------------------
        // 2. L√≥gica de Simula√ß√£o de Rea√ß√£o e Anima√ß√£o
        // ------------------------------------------------

        function simularReacao() {
            const resultadoDiv = document.getElementById('resultado');
            const jarraDiv = document.getElementById('jarra');
            
            if (elementosNaJarra.length < 2) {
                resultadoDiv.innerHTML = "Adicione pelo menos dois elementos para simular uma rea√ß√£o.";
                return;
            }
            
            if (document.querySelector('.produto-final')) {
                resultadoDiv.innerHTML = "J√° existe um produto na jarra. Limpe-a para uma nova rea√ß√£o.";
                return;
            }

            const simbolos = elementosNaJarra.map(e => e.simbolo);
            const elementosUnicos = [...new Set(simbolos)].sort();
            const elementosChave = elementosUnicos.join(',');
            
            let compostoCriado = null;
            let resultadoReacaoHTML = '';
            
            // --- Regras de Rea√ß√£o (Exemplos) ---
            if (elementosChave === 'H,O') { compostoCriado = 'H‚ÇÇO'; resultadoReacaoHTML = '<h2>üí¶ Rea√ß√£o: √Ågua (H‚ÇÇO)</h2><p>Dois √°tomos de Hidrog√™nio e um de Oxig√™nio se juntaram por **Liga√ß√£o Covalente**.</p>'; }
            else if (elementosChave === 'Cl,Na') { compostoCriado = 'NaCl'; resultadoReacaoHTML = '<h2>üßÇ Rea√ß√£o: Cloreto de S√≥dio (NaCl)</h2><p>O S√≥dio doou um el√©tron para o Cloro, formando o Sal de Cozinha por **Liga√ß√£o I√¥nica**.</p>'; }
            else if (elementosChave === 'Mg,O') { compostoCriado = 'MgO'; resultadoReacaoHTML = '<h2>‚ú® Rea√ß√£o: √ìxido de Magn√©sio (MgO)</h2><p>Rea√ß√£o intensa entre Magn√©sio e Oxig√™nio por **Liga√ß√£o I√¥nica**.</p>'; }
            else if (elementosChave.includes('C') && elementosChave.includes('O')) { compostoCriado = 'CO‚ÇÇ'; resultadoReacaoHTML = '<h2>‚òÅÔ∏è Rea√ß√£o: Di√≥xido de Carbono (CO‚ÇÇ)</h2><p>Carbono reagiu com Oxig√™nio em uma **Combust√£o Completa**.</p>'; }
            else if (elementosChave === 'H,N') { compostoCriado = 'NH‚ÇÉ'; resultadoReacaoHTML = '<h2>üå¨Ô∏è Rea√ß√£o: Am√¥nia (NH‚ÇÉ)</h2><p>Nitrog√™nio e Hidrog√™nio combinaram-se por **Liga√ß√£o Covalente**.</p>'; }
            else if (elementosChave.includes('P') && elementosChave.includes('K')) { compostoCriado = 'CP'; resultadoReacaoHTML = '<h2>üï∏Ô∏è Rea√ß√£o: Composto Complexo (PK)</h2><p>Rea√ß√£o hipot√©tica de F√≥sforo e Pot√°ssio. Geralmente usado em **fertilizantes** (PK).</p>'; }
            else if (elementosChave.includes('He') || elementosChave.includes('Ne') || elementosChave.includes('Ar')) { compostoCriado = 'Mistura'; resultadoReacaoHTML = '<h2>üí° Mistura Inerte (Gases Nobres)</h2><p>Os Gases Nobres n√£o reagem quimicamente em condi√ß√µes normais. O resultado √© sempre uma **Mistura de Gases**.</p>'; }
            else { compostoCriado = 'Mistura'; resultadoReacaoHTML = `<h2>üîç Resultado: Mistura Simples</h2><p>Os elementos **${elementosChave.replace(/,/g, ', ')}** foram misturados. Sem rea√ß√£o espec√≠fica programada.`; }


            const nomeComposto = imagensCompostos[compostoCriado] ? imagensCompostos[compostoCriado].split('(')[0].trim() : 'Composto';
            
            resultadoDiv.style.opacity = 0; 
            
            // --- Inicia a Anima√ß√£o de Fus√£o ---
            elementosNaJarra.forEach(elemento => {
                elemento.dom.classList.add('reagente-animado');
            });

            // Cria o visual do produto final (invis√≠vel no come√ßo)
            const produtoVisualJarra = document.createElement('div');
            produtoVisualJarra.classList.add('produto-final');
            produtoVisualJarra.innerHTML = nomeComposto;
            produtoVisualJarra.draggable = true; 
            produtoVisualJarra.dataset.composto = compostoCriado; 
            produtoVisualJarra.addEventListener('dragstart', handleDragStart); 
            jarraDiv.appendChild(produtoVisualJarra);

            ultimoCompostoNaJarra = { simbolo: compostoCriado, dom: produtoVisualJarra }; 

            // 3. Limpa a jarra e mostra o resultado ap√≥s a anima√ß√£o
            setTimeout(() => {
                elementosNaJarra.forEach(elemento => elemento.dom.remove());
                elementosNaJarra = [];
                
                produtoVisualJarra.style.animation = 'none';
                produtoVisualJarra.style.opacity = 1;

                resultadoDiv.innerHTML = resultadoReacaoHTML + `<span class="aparencia-produto">Apar√™ncia: **${imagensCompostos[compostoCriado].split('(')[1].replace(')', '')}**</span><div class="produto-visual">${nomeComposto}</div>`;
                resultadoDiv.style.opacity = 1;

                if (compostoCriado && compostoCriado !== 'Mistura' && !compostosCriados.includes(compostoCriado)) {
                    compostosCriados.push(compostoCriado);
                    atualizarListaCompostos();
                }

            }, 1800); 

        }
        
        // ------------------------------------------------
        // 3. Fun√ß√µes de Controle da Jarra
        // ------------------------------------------------

        function atualizarListaCompostos() {
            const listaUL = document.getElementById('lista-elementos-criados');
            listaUL.innerHTML = '';
            
            if (compostosCriados.length === 0) {
                listaUL.innerHTML = '<li>Nenhum composto criado ainda.</li>';
                return;
            }

            compostosCriados.forEach(composto => {
                const li = document.createElement('li');
                const nomeSimbolico = imagensCompostos[composto] ? imagensCompostos[composto].split('(')[0].trim() : 'Composto';
                li.textContent = `${composto} (${nomeSimbolico})`;
                listaUL.appendChild(li);
            });
        }
        
        function resetLab() {
            elementosNaJarra.forEach(elemento => elemento.dom.remove());
            elementosNaJarra = [];
            
            const produtoExistente = document.querySelector('.produto-final');
            if (produtoExistente) {
                produtoExistente.remove();
            }
            ultimoCompostoNaJarra = null;

            const jarraDiv = document.getElementById('jarra');
            jarraDiv.innerHTML = 'Clique nos elementos da Tabela Peri√≥dica para adicion√°-los.';
            jarraDiv.style.display = 'flex'; 
            
            document.getElementById('resultado').innerHTML = "Aguardando a sua primeira mistura...";
            document.getElementById('elemento-info').innerHTML = '<h3>Informa√ß√µes do Elemento Selecionado</h3><p>Nenhum elemento liberado. Clique em um da tabela para ver detalhes e adicion√°-lo √† jarra.</p>';
            document.getElementById('resultado').style.opacity = 1;
        }

        // ------------------------------------------------
        // 4. Fun√ß√µes de Drag and Drop (Arrastar e Soltar)
        // ------------------------------------------------

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.composto);
        }

        function handleDragOver(e) {
            e.preventDefault(); 
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            
            const composto = e.dataTransfer.getData('text/plain');
            reagirNaPlanta(composto);

            if (ultimoCompostoNaJarra && ultimoCompostoNaJarra.simbolo === composto) {
                ultimoCompostoNaJarra.dom.remove();
                ultimoCompostoNaJarra = null;
                document.getElementById('resultado').innerHTML = "Produto aplicado na planta. Limpe a jarra para um novo reagente.";
            }
        }

        // ------------------------------------------------
        // 5. L√≥gica de Rea√ß√£o na Planta
        // ------------------------------------------------
        function reagirNaPlanta(composto) {
            const plantElement = document.getElementById('myPlant');
            const feedback = document.getElementById('plant-feedback');
            
            plantElement.className = 'plant'; 

            if (composto === 'H‚ÇÇO') {
                plantElement.classList.add('plant-state-normal');
                feedback.textContent = "üíß √Ågua (H‚ÇÇO) aplicada. Hidrata√ß√£o saud√°vel!";
                feedback.style.color = '#3498db';
            } else if (composto === 'NH‚ÇÉ' || composto === 'CP') { 
                plantElement.classList.add('plant-state-crescida');
                feedback.textContent = "üåø Nutrientes (N/P/K) aplicados! Crescimento r√°pido!";
                feedback.style.color = '#27ae60';
            } else if (composto === 'NaCl' || composto === 'MgO') {
                plantElement.classList.add('plant-state-murcha');
                feedback.textContent = "‚ö†Ô∏è Alto teor de S√≥dio ou Magn√©sio. A planta est√° murchando!";
                feedback.style.color = '#f39c12';
            } else if (composto === 'Cianeto' || composto === 'HF') { 
                plantElement.classList.add('plant-state-envenenada');
                feedback.textContent = "üíÄ Veneno aplicado! A planta est√° morrendo!";
                feedback.style.color = '#e74c3c';
            } else if (composto === 'CO‚ÇÇ') {
                plantElement.classList.add('plant-state-exotica');
                feedback.textContent = "‚ú® Efeito Estufa (CO‚ÇÇ)! Crescimento ex√≥tico e estranho!";
                feedback.style.color = '#9b59b6';
            } else {
                plantElement.classList.add('plant-state-normal');
                feedback.textContent = "Produto Neutro aplicado. Sem efeito vis√≠vel.";
                feedback.style.color = '#555';
            }

            if (!plantElement.classList.length) {
                plantElement.classList.add('plant-state-normal');
                feedback.textContent = "Planta em estado Normal.";
            }

            atualizarListaCompostos();
        }

        function resetPlant() {
            const plantElement = document.getElementById('myPlant');
            const feedback = document.getElementById('plant-feedback');

            plantElement.className = 'plant';
            plantElement.classList.add('plant-state-normal');
            feedback.textContent = "Planta em estado Normal.";
            feedback.style.color = '#333';
        }

        // Inicializa a planta e a lista
        document.addEventListener('DOMContentLoaded', () => {
            resetPlant(); 
            atualizarListaCompostos();
        });
    </script>
</body>
</html>
